<!DOCTYPE html>
<html>

<head>
	<title>STEMQuest</title> <!--change title later-->
	<link rel="stylesheet" href="Learn.css" />
	<link rel="stylesheet" href="UserCompleteTab.css" />
	<link rel="stylesheet" href="Handouts.css" />
	<script src="UserCompleteTab.js" defer></script>
</head>

<body id="ChangeBG2">
	<script type="module" src="login.js" defer></script>
	<div id="MainBody">
		<nav class="navbar">
			<div class="nav-left">
				<h1 class="stemquest" onclick="gobacktohome()" style="cursor: pointer;">STEMQUEST</h1>
				<p onclick="event.stopPropagation(); LearnOpenDrop()" class="nav-link" style="cursor: pointer;">Learn
				</p>
				<div class="LearnDropDown" id="LearnDropDownMenu">
					<div class="LearnDropContent" data-grade="11">
						<a href="https://username.github.io/StemQuestFinale/GR11/01_Handout_2.pdf" download>
							<p>The Cell Theory and Cell Classification</p>
						</a>
						<a href="https://username.github.io/StemQuestFinale/GR11/02_Handout_3.pdf" download>
							<p>Cell Modification and Specialization</p>
						</a>
						<a href="https://username.github.io/StemQuestFinale/GR11/03_Handout_2.pdf" download>
							<p>Plasma Membrane and Transport Mechanisms</p>
						</a>
						<a href="https://username.github.io/StemQuestFinale/GR11/04_Handout_2.pdf" download>
							<p>Cellular Energy and Metabolism</p>
						</a>
						<a href="https://username.github.io/StemQuestFinale/GR11/05_Handout_3.pdf" download>
							<p>The Organizational Chart of Matter</p>
						</a>
						<a href="https://username.github.io/StemQuestFinale/GR11/05_Handout_4.pdf" download>
							<p>The Organizational Chart of Matter P2</p>
						</a>
						<a href="https://username.github.io/StemQuestFinale/GR11/06_Handout_2.pdf" download>
							<p>The Four (4) Major Biological Molecules</p>
						</a>
						<a href="https://username.github.io/StemQuestFinale/GR11/07_Handout_23.pdf" download>
							<p>The Cell Cycle, Mitosis, Meiosis</p>
						</a>
						<a href="https://username.github.io/StemQuestFinale/GR11/08_Handout_23.pdf" download>
							<p>Basic Genetics and Mendelian Genetics</p>
						</a>
					</div>
					<div class="LearnDropContent" data-grade="12">
						<a href="https://username.github.io/StemQuestFinale/GR12/01_Handout_110.pdf" download>
							<p>Introduction To Chemistry</p>
						</a>
						<a href="https://username.github.io/StemQuestFinale/GR12/02_Handout_1100.pdf" download>
							<p>Measurements</p>
						</a>
						<a href="https://username.github.io/StemQuestFinale/GR12/03_Handout_182.pdf" download>
							<p>Atoms, Molecules, and Ions</p>
						</a>
						<a href="https://username.github.io/StemQuestFinale/GR12/04_Handout_1113.pdf" download>
							<p>Stoichiometry</p>
						</a>
						<a href="https://username.github.io/StemQuestFinale/GR12/05_Handout_15.pdf" download>
							<p>The Organizational Chart of Matter</p>
						</a>
						<a href="https://username.github.io/StemQuestFinale/GR12/06_Handout_13-2.pdf" download>
							<p>Gas Laws</p>
						</a>
					</div>
				</div>
			</div>

			<div class="nav-right">
				<img class="search-btn" src="search.png" alt="Search" class="search-icon"
					onclick="event.stopPropagation(); openSearch()">

				<button class="User-Icon" onclick="event.stopPropagation(); openDrop()"></button>
				<!--to be changed-->
				<div class="DropDown" id="DropDownMenu">
					<a href="Collection.html" class="droplink" target="_self" onclick="alertabi()">
						Profile
					</a>
					<p onclick="event.stopPropagation(); SignouT()">
						Sign Out
					</p>
				</div>
			</div>
		</nav>
	</div>
	<!--Class names are to be changed/current placeholders-->
	<!--Main Content-->
	<div id="BILATNAMO">
		<div id="ContentWrapper">
			<div class="Columnseparator">

				<button id="BackButton" onclick="window.location.href='UserCompleteTab.html'">BACK TO HOME</button>
				<div class="HandoutContent" data-grade="11" data-button="1">
					<div class="RowseparatorTop" data-grade="11" data-button="1">
						<div class="CollectionIMGS"></div>
						<div class="TextTohMen">
							<p>HANDOUT 6</p>
						</div>
					</div>
				</div>
				<div class="Container" data-grade="11">
					<div class="notice">
						<span>Before you start your journey, Do you want to download your handout?</span>
						<a href="https://username.github.io/StemQuestFinale/GR11/06_Handout_2.pdf" target="_blank">Download Here.</a>
					</div>

					<div class="card">
						<div class="band">Hydrocarbons</div>
						<p>Hydrocarbons are molecules made entirely of carbon–carbon and carbon–hydrogen bonds.</p>
						<ul>
							<li>Alkanes — single C–C bonds</li>
							<li>Alkenes — double C–C bonds</li>
							<li>Alkynes — triple C–C bonds</li>
							<li>Benzene ring (phenyl)</li>
						</ul>
					</div>

					<div class="card">
						<div class="band">Functional Groups</div>
						<p>Functional groups give molecules their chemical behavior. Major groups include:</p>
						<ul>
							<li>Amine</li>
							<li>Alcohol</li>
							<li>Ether</li>
							<li>Alkyl halide</li>
							<li>Ketone</li>
							<li>Amide</li>
							<li>Thiol</li>
							<li>Ester</li>
							<li>Carboxylic acid</li>
							<li>Aldehyde</li>
						</ul>
					</div>

					<div class="card">
						<div class="band">Biological Molecules</div>
						<p>Biomolecules are organic macromolecules built from monomers via dehydration synthesis.</p>
						<ul>
							<li><strong>Polymers</strong> = chains of monomers</li>
							<li><strong>Isomers</strong> = same formula, different structure</li>
							<li><strong>Stereoisomers</strong> = same skeleton, different 3D arrangement</li>
						</ul>
					</div>

					<div class="card2">
						<div class="band">Four Major Biological Molecules</div>

						<p><strong>Carbohydrates</strong></p>
						
						<ul>
							<li>Monomers: monosaccharides (glucose, ribose)</li>
							<li>Polymers: starch, glycogen, cellulose, chitin</li>
							<li>Function: energy storage & structural support</li>
						</ul>

						<p><strong>Lipids</strong></p>
						<ul>
							<li>Subunits: glycerol + fatty acids</li>
							<li>Saturated = single bonds (solid fats)</li>
							<li>Unsaturated = double bonds (liquid oils)</li>
							<li>Phospholipids form cell membranes</li>
						</ul>

						<p><strong>Proteins</strong></p>
						<ul>
							<li>Subunit: amino acids</li>
							<li>Functions: enzymes, transport, support, movement, regulation</li>
						</ul>

						<p><strong>Nucleic Acids</strong></p>
						<ul>
							<li>DNA & RNA</li>
							<li>Subunits: nucleotides (sugar, nitrogen base, phosphate)</li>
							<li>DNA bases: A, T, C, G</li>
							<li>RNA bases: A, U, C, G</li>
						</ul>
					</div>

					<div class="card">
						<div class="band">Carbohydrates</div>
						<p>Composed of C, H, and O in a 1:2:1 ratio. Used mainly for energy storage.</p>
						<ul>
							<li><strong>Monosaccharides</strong> — glucose, fructose, ribose</li>
							<li><strong>Disaccharides</strong> — sucrose, lactose, maltose</li>
							<li><strong>Polysaccharides</strong> — starch, glycogen, amylopectin</li>
						</ul>
					</div>

					<div class="card">
						<div class="band">Lipids</div>
						<p>Lipids are water-insoluble molecules with glycerol and fatty acid tails.</p>
						<ul>
							<li><strong>Saturated fats</strong> — only single C–C bonds, solid at room temp</li>
							<li><strong>Unsaturated fats</strong> — double bonds create kinks; liquid oils</li>
							<li><strong>Phospholipids</strong> — form cell membranes</li>
							<li><strong>Steroids</strong> — 4 carbon rings</li>
						</ul>
					</div>

					<div class="card">
						<div class="band">Nucleic Acids</div>
						<p>DNA and RNA store and transmit genetic information.</p>
						<ul>
							<li>Monomer: nucleotide</li>
							<li>DNA sugar: deoxyribose</li>
							<li>RNA sugar: ribose</li>
							<li>DNA bases: A, T, C, G</li>
							<li>RNA bases: A, U, C, G</li>
						</ul>
					</div>

					<div class="card">
						<div class="band">Proteins</div>
						<p>Proteins are chains of amino acids folded into complex structures.</p>
						<p><strong>Levels of structure:</strong></p>
						<ul>
							<li>Primary — amino acid sequence</li>
							<li>Secondary — α-helices & β-sheets</li>
							<li>Tertiary — 3D folding</li>
							<li>Quaternary — multiple polypeptide subunits</li>
						</ul>
					</div>

					<div class="card2">
						<div class="band">Chemical Tests for Biomolecules</div>

						<p><strong>Benedict’s Test (Carbohydrates)</strong></p>
						<ul>
							<li>Positive: brick-red/orange/green ppt</li>
							<li>Negative: blue solution</li>
						</ul>

						<p><strong>Biuret Test (Proteins)</strong></p>
						<ul>
							<li>Positive: violet or pink</li>
							<li>Negative: blue</li>
						</ul>

						<p><strong>Spot Test (Lipids)</strong></p>
						<ul>
							<li>Positive: translucent stain</li>
							<li>Negative: no stain</li>
						</ul>

						<p><strong>Emulsion Test (Lipids)</strong></p>
						<ul>
							<li>Positive: red-stained lipid layer</li>
							<li>Negative: uniform solution</li>
						</ul>

						<p><strong>Dische Test (DNA)</strong></p>
						<ul>
							<li>Positive: blue</li>
							<li>Negative: clear</li>
						</ul>
					</div>

					<div class="quote-row">
							<div class="avatar-box"></div>
							<div class="quote-bubble">
								“Study on, for each page thou read’st brings thee nigher to thy destiny.”
							</div>
						</div>

						<div class="quote-row">
							<div class="avatar-box"></div>
							<div class="quote-bubble">
								“Before thou takest the quiz, be sure to read well thy handouts.”
							</div>
						</div>

					<!--Dapat sa end to-->
					<button class="QuizButton" data-grade="11" data-index="6" data-file="QuizTime.html">Proceed to
						Quiz</button>
				</div>
				<div class="HandoutContent" data-grade="12" data-button="1">
					<div class="RowseparatorTop" data-grade="12" data-button="1">
						<div class="CollectionIMGS"></div>
						<div class="TextTohMen">
							<p>HANDOUT 6</p>
						</div>
					</div>
				</div>
				<div class="Container" data-grade="12">
					<div class="notice">
						<span>Before you start your journey, Do you want to download your handout?</span>
						<a href="https://username.github.io/StemQuestFinale/GR12/06_Handout_13-2.pdf" target="_blank">Download Here.</a>
					</div>

					<!-- Electronic Structure of Atoms Summary -->

					<div class="card">
						<div class="band">What is Electronic Structure?</div>
						<p>The electronic structure describes how electrons are arranged around the nucleus. This
							arrangement determines an element’s bonding, reactivity, stability, color, magnetism, and
							many other chemical properties.</p>
						<p>Electrons occupy specific energy levels, and their arrangement follows set rules known as
							electron configuration.</p>
					</div>

					<div class="card">
						<div class="band">Atoms & Electrons</div>
						<ul>
							<li><strong>Electrons</strong> – negatively charged particles</li>
							<li><strong>Protons</strong> – positively charged particles</li>
							<li><strong>Neutrons</strong> – neutral particles</li>
							<li><strong>Nucleus</strong> – dense center containing protons & neutrons</li>
							<li><strong>Electron Cloud</strong> – region where electrons are likely found</li>
						</ul>
					</div>

					<div class="card">
						<div class="band">Importance of Electronic Structure</div>
						<p>The arrangement of electrons determines:</p>
						<ul>
							<li>Chemical reactivity</li>
							<li>Bond formation</li>
							<li>Ion formation</li>
							<li>Color of compounds</li>
							<li>Magnetic behavior</li>
						</ul>
					</div>

					<div class="card">
						<div class="band">Valence Electrons</div>
						<p>The outermost electrons of an atom. They are responsible for:</p>
						<ul>
							<li>Bonding</li>
							<li>Reactivity</li>
							<li>Stability of ions</li>
						</ul>
					</div>

					<div class="card">
						<div class="band">Rutherford Model</div>
						<p>Proposed a dense, positively charged nucleus with electrons orbiting around it. However, it
							could not explain electron arrangement or stability.</p>
					</div>

					<div class="card">
						<div class="band">Bohr Model</div>
						<p>Electrons revolve around the nucleus in fixed circular orbits (energy levels). Electrons can
							jump between levels by absorbing or releasing energy.</p>
					</div>

					<div class="card">
						<div class="band">Aufbau Principle</div>
						<p>Electrons fill the lowest energy orbitals first before occupying higher ones.</p>
					</div>

					<div class="card">
						<div class="band">Pauli Exclusion Principle</div>
						<p>No two electrons in an atom can have the same set of all four quantum numbers. Each orbital
							can hold only two electrons with opposite spins.</p>
					</div>

					<div class="card">
						<div class="band">Hund’s Rule</div>
						<p>Electrons fill orbitals of equal energy singly first before pairing up. This minimizes
							electron repulsion.</p>
					</div>

					<div class="card">
						<div class="band">Quantum Numbers</div>
						<p>They describe the exact location and properties of an electron.</p>
						<ul>
							<li><strong>n</strong> – energy level (1, 2, 3...)</li>
							<li><strong>l</strong> – subshell (s, p, d, f)</li>
							<li><strong>m<sub>l</sub></strong> – orientation of the orbital</li>
							<li><strong>m<sub>s</sub></strong> – electron spin (+½ or –½)</li>
						</ul>
					</div>

					<div class="card">
						<div class="band">Planck’s Quantum Theory</div>
						<p>Energy is absorbed or emitted in small packets called quanta.</p>
						<p><strong>Formula:</strong> E = hν</p>
						<p><strong>Formula:</strong> E = hc/λ</p>
					</div>

					<div class="card">
						<div class="band">Photoelectric Effect</div>
						<p>Light behaves as photons. Electrons are ejected from a metal surface when struck by photons
							with enough energy.</p>
						<p><strong>Energy of a photon:</strong> E = hν</p>
					</div>

					<div class="card">
						<div class="band">Why Electron Configuration Matters</div>
						<p>Used to determine:</p>
						<ul>
							<li>How atoms bond (ionic/covalent)</li>
							<li>Shapes of molecules</li>
							<li>Chemical stability</li>
							<li>Periodic trends (size, ionization energy, etc.)</li>
						</ul>
					</div>

					<div class="quote-row">
							<div class="avatar-box"></div>
							<div class="quote-bubble">
								“Study on, for each page thou read’st brings thee nigher to thy destiny.”
							</div>
						</div>

						<div class="quote-row">
							<div class="avatar-box"></div>
							<div class="quote-bubble">
								“Before thou takest the quiz, be sure to read well thy handouts.”
							</div>
						</div>

					<!--Dapat sa end to-->
					<button class="QuizButton" data-grade="12" data-index="6" data-file="QuizTime.html">Proceed to
						Quiz</button>
				</div>


			</div>
		</div> <!--End of ContentWrapper-->

		<div class="YAWASideBar">
			<div id="TopSection">
				<div class="GreenSquare2">
					<div class="ContentWrap">
						<div class="WhiteSquare"></div>
						<p class="greenUserName">username</p>
						<textarea id="GreenNameInput" style="display:none;"></textarea>
					</div>
					<div class="StarContainer" data-grade="11">
						<div class="RowseparatorTop">
							<div class="Star" data-quiz-index="4"></div>
							<div class="Star" data-quiz-index="8"></div>
							<div class="Star" data-quiz-index="11"></div>
						</div>
					</div>
					<div class="StarContainer" data-grade="12">
						<div class="RowseparatorTop">
							<div class="Star" data-quiz-index="4"></div>
							<div class="Star" data-quiz-index="8"></div>
						</div>
					</div>
					<div class="RowseparatorTop">
						<p class="GSTEXT">Areas Explored:</p>
						<p id="NumAreas"></p>
					</div>
					<div class="RowseparatorTop">
						<p class="GSTEXT">Total Exp:</p>
						<p id="NumEXP"></p>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!--End of Mainbody-->

	<!-- Panel Popup -->
	<div class="form-popup" id="myForm"></div>

	<div class="search-popup" id="mysearch">
		<div class="search-outline">
			<form action="#" class="search-container">
				<input type="text" placeholder="Search" name="search" id="searchtab" oninput="searchitems()">

				<button type="button" id="btnsearchcancel" class="btn cancel" onclick="closeSearch()">Close</button>
				<!--change into X in future-->
			</form>
		</div>
		<div id="results"></div>
	</div>

	<script>
		function searchitems() {
			const searchValue = document.getElementById("searchtab").value.toLowerCase().trim();
			const results = document.getElementById("results");
			const items = document.querySelectorAll(".Container");

			results.innerHTML = ""; // clear previous results

			if (searchValue === "") return;
			const regex = new RegExp(`\\b${searchValue}\\b`, "i");

			items.forEach(item => {
				const text = item.textContent.toLowerCase();
				if (regex.test(text)) {
					const clone = item.cloneNode(true);
					results.appendChild(clone);
				}
			});
		}
	</script>
	<script type="module" defer>
		// =================== Main Page User Display Handler ===================

		import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-auth.js";
		import { getFirestore, doc, getDoc, setDoc } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-firestore.js";
		import { getStorage, ref as storageRef, getDownloadURL } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-storage.js";

		const auth = getAuth();
		const db = getFirestore();
		const storage = getStorage();


		window.addEventListener('DOMContentLoaded', () => {

			// Elements on the main page
			const MainPageName = document.querySelector('.greenUserName');
			const MainPageIcon = document.querySelector('.WhiteSquare');
			const MaisotIcon = document.querySelector('.User-Icon');

			// Get current UID from localStorage (saved by profile page after login)
			const uid = localStorage.getItem('currentUID');
			if (!uid) return; // user not logged in

			//Try localStorage first for instant display
			const savedName = localStorage.getItem(`userName_${uid}`);
			const savedIcon = localStorage.getItem(`UIuserBG_${uid}`);

			if (MainPageName && savedName) MainPageName.textContent = savedName;
			if (MainPageIcon && savedIcon) {
				MainPageIcon.style.backgroundImage = `url(${savedIcon})`;
				MainPageIcon.style.backgroundSize = 'cover';
				MainPageIcon.style.backgroundPosition = 'center';
			}

			if (MaisotIcon && savedIcon) {
				MaisotIcon.style.backgroundImage = `url(${savedIcon})`;
				MaisotIcon.style.backgroundSize = 'cover';
				MaisotIcon.style.backgroundPosition = 'center';
			}

			//Fetch from Firestore to make sure it's up to date
			onAuthStateChanged(auth, async (user) => {
				if (!user) return;

				const userDocRef = doc(db, 'users', uid);
				const docSnap = await getDoc(userDocRef);

				if (docSnap.exists()) {
					const data = docSnap.data();

					// Update username
					if (data.userName) {
						if (MainPageName) MainPageName.textContent = data.userName;
						localStorage.setItem(`userName_${uid}`, data.userName);
					}

					// Update icon
					if (data.UIuserBG) {
						if (MainPageIcon) {
							MainPageIcon.style.backgroundImage = `url(${data.UIuserBG})`;
							MainPageIcon.style.backgroundSize = 'cover';
							MainPageIcon.style.backgroundPosition = 'center';
						}
						localStorage.setItem(`UIuserBG_${uid}`, data.UIuserBG);
					}

					if (data.UIuserBG) {
						if (MaisotIcon) {
							MaisotIcon.style.backgroundImage = `url(${data.UIuserBG})`;
							MaisotIcon.style.backgroundSize = 'cover';
							MaisotIcon.style.backgroundPosition = 'center';
						}
						localStorage.setItem(`UIuserBG_${uid}`, data.UIuserBG);
					}
				}
				showGradeContent(uid);

			});
		});

		async function showGradeContent(userId) {
			const userRef = doc(db, "users", userId);

			try {
				const userSnap = await getDoc(userRef);

				if (userSnap.exists()) {
					const userData = userSnap.data();
					const grade = userData.grade;

					console.log("User grade from Firestore:", grade);

					const items = document.querySelectorAll(".grayitem");
					items.forEach((item, index) => {
						const itemGrade = item.getAttribute("data-grade");
						if ((grade === "STEM 11" && itemGrade === "11") || (grade === "STEM 12" && itemGrade === "12")) {
							item.style.display = "block"; // show first
							setTimeout(() => {
								item.classList.add("active"); // then animate
							}, index * 25); // 100ms stagger per item
						} else {
							item.classList.remove("active");
							item.style.display = "none";
						}
					});

				} else {
					console.log("No such user!");
				}
			} catch (error) {
				console.error("Error fetching user grade:", error);
			} finally {
				overlay.classList.remove("active"); // hide loader
			}
		}

		//handle quiz iya ah hahahha
		// Select all grayitem elements
		const graydivs = document.querySelectorAll('.grayitem');

		// Get current UID
		const uid = localStorage.getItem('currentUID');
		if (!uid) {
			console.log("No user logged in");
		}

		graydivs.forEach((div, index) => {
			div.addEventListener('click', async () => {
				const clickedData = {
					text: div.textContent,
					index: index,
					grade: div.dataset.grade,
					timestamp: new Date().toISOString()
				};

				try {
					// Save under the current user's document
					await setDoc(doc(db, "quizSelections", uid), clickedData);
					console.log("Saved to Firebase:", clickedData);
					window.location.href = "QuizTime.html";
				} catch (error) {
					console.error("Error saving selection:", error);
				}
			});
		});

	</script>
	<script type="module" src="UserCompleteExtended.js" defer></script>
	<script type="module" src="GHANDOUTS.js" defer></script>

	<div id="dimOverlay">
		<div class="loader"></div>
	</div>
</body>

</html>